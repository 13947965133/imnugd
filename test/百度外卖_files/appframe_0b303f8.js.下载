"undefined"==typeof window.walle&&(window.walle={});
;!function(walle){var PAGE_LETS_NAME="pager",CACHE_TIME=3e5,PageLoader=function(){this.pageResourceMap={}};PageLoader.prototype.loadPage=function(e,t,a,o){this._request(e,function(e){t&&t(e)},a,o)},PageLoader.prototype._request=function(e,t,a,o){var r=this.pageResourceMap[e],n=o.pageCache&&this._isCacheValid(r);n?t(r.pageInfo):this.updateCache(e,t,a)},PageLoader.prototype.updateCache=function(e,t,a){var o=this;this._requestFromServer(e,function(a){o._saveToCache(e,a),t&&t(a)},a)},PageLoader.prototype._saveToCache=function(e,t){this.pageResourceMap[e]={time:(new Date).getTime(),pageInfo:t}},PageLoader.prototype._isCacheValid=function(e){if(e){var t=(new Date).getTime()-e.time;return t>CACHE_TIME?!1:!0}return!1},PageLoader.prototype._requestFromServer=function(e,t,a){var o=this,r=new(window.XMLHttpRequest||ActiveXObject)("Microsoft.XMLHTTP");r.onreadystatechange=function(){if(4==r.readyState)if(r.responseText){try{var e=o._parseJSON(r.responseText)}catch(n){return void(a&&a(e))}t&&t(e)}else a&&a()},r.onerror=function(){a&&a(data)};var n=this._jointUrl(e);r.open("get",n,!0),r.setRequestHeader("X-Requested-With","XMLHttpRequest"),r.send()},PageLoader.prototype._jointUrl=function(e){var t=e;return t=-1==e.indexOf("?")?e+"?pagelets[]="+PAGE_LETS_NAME+"&t="+~~(1e6*Math.random()):e+"&pagelets[]="+PAGE_LETS_NAME+"&t="+~~(1e6*Math.random())},PageLoader.prototype._parseJSON=function(json){return window.JSON?JSON.parse(json):eval("("+json+")")},walle.pageLoader=new PageLoader}(window.walle);
;!function(e,o){var t=function(){this.loadedResource=[]};t.prototype.loadPageCommonLibs=function(e){var t=o.getPageCommonLibs();t&&t.length||e&&e(),o.js(t,function(){e&&e()})},t.prototype.loadCssStyleResource=function(e,t){function n(){if(e.style){var o=document.createElement("style");o.innerHTML=e.style,document.getElementsByTagName("head")[0].appendChild(o)}t&&t()}e.css?o.css(e.css.reverse(),function(){n()}):n()},t.prototype.loadJsScriptResource=function(e,t){e.js?o.js(e.js,function(){e.script&&window.eval(e.script),t&&t()}):(e.script&&window.eval(e.script),t&&t())},e.pageResourceLoader=new t}(window.walle,LazyLoad);
;!function(e,t){var n="pager",r=function(){};r.prototype.render=function(e,r,o){var d=this,i=document.getElementById(n),a=e.title;a&&(document.title=a);var l=e.pagelets,u=e.resource_map;t.loadCssStyleResource(u,function(){d._renderPageLets(l,i),t.loadPageCommonLibs(function(){t.loadJsScriptResource(u,function(){o&&o()})})}),r&&r()},r.prototype._renderPageLets=function(e,t){for(var n={},r=0;r<e.length;r++){var o=e[r];n[o.id]=o}this._renderPageletsRecur(e,n,t)},r.prototype._renderPageletsRecur=function(e,t,n){for(var r=this,o={},d=(function(e){e.id in o||(o[e.id]=!0,e.parent_id&&d(t[e.parent_id]),r._renderPagelet(e,n))}),i=0;i<e.length;i++){var a=e[i];d(a)}},r.prototype._renderPagelet=function(e,t){var n=document.getElementById(e.id);n||(n=document.createElement("div"),n.id=e.id,t?t.appendChild(n):document.body.appendChild(n)),n.innerHTML=e.html||this._getCommentById(e.html_id)},r.prototype._getCommentById=function(e){var t=document.getElementById(e);if(!t)return"";var n=t.firstChild.nodeValue;return n=n.substring(1,n.length-1).replace(/\\([\s\S]|$)/g,"$1"),t.parentNode.removeChild(t),n},e.pageRender=new r}(window.walle,walle.pageResourceLoader);
;walle.appResource=function(){var e={show:function(){document.getElementById("page-loader").style.display=""},hide:function(){document.getElementById("page-loader").style.display="none"}};return{appLoader:e}}();
;!function(e){document.addEventListener("pageLoadStart",function(){e.appLoader.show()}),document.addEventListener("pageLoadEnd",function(){e.appLoader.hide()})}(walle.appResource);
;!function(e,t,r){var n=/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/i,o=function(e,t){var r=document.createEvent("Events");if(r.initEvent(e),t)for(var n in t)r[n]=t[n];document.dispatchEvent(r)},i=function(e,t){t||(t={}),this.url=e,this.optionMap=t};i.prototype.onSuccessLoad=function(e){this.successLoadAction=e},i.prototype.onFailLoad=function(e){this.failLoadAction=e},i.prototype.doIgnore=function(){this.successLoadAction=null,this.failLoadAction=null},i.prototype.doFetch=function(){var e=this;t.loadPage(this.url,function(t){e.successLoadAction&&e.successLoadAction.call(e,t)},function(){e.failLoadAction&&e.failLoadAction.call(e)},e.optionMap)};var a=function(){this.curPageUrl=this.getCurrentUrl(),this.pageFetchers=[]};a.prototype={redirect:function(e,t){t||(t={}),t.source_type="redirect",this.getCurrentUrl()!==e&&this.fetchPage(e,t)},forward:function(e,t){t||(t={}),t.source_type="forward",this.getCurrentUrl()!==e&&this.fetchPage(e,t)},getUrl:function(e){return n.test(e)?RegExp.$5+(RegExp.$6?RegExp.$6:""):void("console"in window&&console.error("[url error]:",e))},getCurrentUrl:function(){return this.getUrl(window.location.href)},fetchPage:function(e,t){t||(t={});var r=this;if(e){for(;r.pageFetchers.length;){var n=r.pageFetchers.pop();n.doIgnore()}var i=this._createPageFetcher(e,t);r.pageFetchers.push(i),o("pageLoadStart"),i.doFetch()}},_createPageFetcher:function(e,t){var n=this,a=new i(e,t),c=function(){n.pageFetchers.splice(0,n.pageFetchers.length)};return a.onSuccessLoad(function(e){var i=this;o("pageArrived"),c(),n._updateHistory(i.url,t),o("pageRenderStart"),r.render(e,function(){o("pageRenderComplete")},function(){n.curPageUrl=i.url,o("pageLoadEnd"),o("pageLoadEndPageLevel")})}),a.onFailLoad(function(){o("pageLoadEnd"),o("pageLoadEndPageLevel"),o("pageLoadFail"),c()}),a},_updateHistory:function(e,t){this.getCurrentUrl()!==e&&("forward"==t.source_type?window.history.replaceState&&window.history.replaceState({},document.title,e):window.history.pushState&&window.history.pushState({},document.title,e))}},e.router=new a}(walle,walle.pageLoader,walle.pageRender),!function(e){var t=function(){var t=e.getCurrentUrl();e.curPageUrl&&t!==e.curPageUrl&&e.fetchPage(t)};window.addEventListener("popstate",t,!1)}(walle.router),!function(e){var t="walle-href",r="walle-cache",n="walle-target",o="click",i=function(o){for(var i=o.target,a=i;a&&a!==document.body;){var c=a.getAttribute(t);if(c){o.stopPropagation(),o.preventDefault();var l=a.getAttribute(r),s=a.getAttribute(n);return l=!!l,void(s&&"redirect"!=s?e.forward(c,{pageCache:l}):e.redirect(c,{pageCache:l}))}a=a.parentNode}};i.isAppScope=!0,document.addEventListener(o,i,!1),walle.router.setHref=function(e,r,n){if(e){e.setAttribute(t,r);for(var o in n)e.setAttribute(o,n[o]);if(this.walleHrefSettingActions)for(var i=0;i<this.walleHrefSettingActions.length;i++)this.walleHrefSettingActions[i](e,r);return!0}},walle.router.onSettingWalleHref=function(e){this.walleHrefSettingActions||(this.walleHrefSettingActions=[]),this.walleHrefSettingActions.push(e)}}(walle.router);
;!function(){var n=[],o=function(o){n.push(o)},e=function(){for(var o=0;o<n.length;o++)n[o]()};document.addEventListener("pageRenderStart",function(){e()}),o(function(){$(window).off("scroll"),document.body.scrollTop=0}),o(function(){window.alog&&(window.alog=void 0),window.alogObjectName&&(window.alogObjectName=void 0),window.alogObjectConfig&&(window.alogObjectConfig=void 0),$(".alog-dp-statistics").remove()}),o(function(){for(var n=document.head.getElementsByTagName("script"),o=document.head.getElementsByTagName("link"),e=document.head.getElementsByTagName("style"),i=0;i<n.length;i++)n[i].parentNode.removeChild(n[i]);for(var i=0;i<o.length;i++)o[i].parentNode.removeChild(o[i]);for(var i=0;i<e.length;i++)e[i].parentNode.removeChild(e[i])}),!function(){var n={pageLoadStart:!0,pageLoadEnd:!0,pageRenderStart:!0,pageArrived:!0,pageRenderComplete:!0,pageLoadFail:!0},e=function(){var o=LazyLoad.getFrameEventMap(),e=[];for(var i in o)for(var d=o[i],t=0;t<d.length;t++){{var a=d[t];a.node}n[i]||a.handler.isAppScope||e.push(a)}return e};o(function(){for(var n=e(),o=0;o<n.length;o++){var i=n[o];i.node.removeEventListener(i.eventType,i.handler,i.capture)}})}(),o(function(){window.$&&(window.$=void 0),window.Zepto&&(window.Zepto=void 0)}),o(function(){window.listener&&(window.listener=void 0)}),o(function(){window.Widget&&(window.Widget=void 0),window.WidgetManager&&(window.WidgetManager=void 0)}),o(function(){window.require&&(window.require=void 0),window.define&&(window.define=void 0)}),o(function(){window.gmu&&(window.gmu=void 0)}),o(function(){window.lbstag&&(window.lbstag=void 0)}),o(function(){window.baidu&&(window.baidu=void 0)}),o(function(){window._&&(window._=void 0)})}();