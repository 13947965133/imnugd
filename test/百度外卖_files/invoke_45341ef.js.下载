define("mwaimai:static/platformInvoke/invoke.js",function(e,o,i){var a=e("mwaimai:static/utils.js"),t=e("mwaimai:comp/popup/popup.js"),n=a.getParam("vmgdb")||"",s=n.substr(0,4),p=(a.getParam("channel")||"",a.getParam("third_party")||""),r=e("mwaimai:static/bridge/NABridge.js"),m=navigator.userAgent,l=/micromessenger/.test(m.toLowerCase())?!0:!1,d={platform:"webapp",time:1e3,selector:{shoplist:"[invoke-shoplist]",shopmenu:"[invoke-shopmenu]",book:"[invoke-book]"},token:{appId:"",timestamp:"",nonceStr:"",signature:""},platforms:["webapp","wmapp","bainuo","box","wise","map","newapp"],shareInfo:{title:"title",desc:"desc",link:"link",imgUrl:"imgUrl"},setShare:function(){switch(this.platform){case"wmapp":this.setShareWMApp();case"box":this.setShareBox();case"wise":this.setShareBox();default:this.setShareWX()}},setShareWMApp:function(){try{window.android&&/^([0-2]\..*|3\.0\.1)$/.test(window.appversion)&&delete this.shareInfo.imgUrl,r.openInUrl("setWXShareParams",this.shareInfo,function(){})}catch(e){}},setShareBox:function(){var e={successcallback:"onSuccess",errorcallback:"onFail",options:{type:"url",mediaType:"all",title:this.shareInfo.title,content:this.shareInfo.desc,iconUrl:this.shareInfo.imgUrl,imageUrl:this.shareInfo.imgUrl,linkUrl:this.shareInfo.link}};"android"===Box.os.name&&Box.version_compare(Box.version,"6.5")<0&&delete e.options.imageUrl},setShareWX:function(){var e=this.shareInfo,o=$.extend({debug:!1,jsApiList:["onMenuShareTimeline","onMenuShareAppMessage"]},this.token);wx.config(o),wx.ready(function(){wx.onMenuShareAppMessage(e),wx.onMenuShareTimeline(e)})},showMask:function(){0==$("#invokeMask").length&&($("body").append('<div id="invokeMask"></div>'),$("#invokeMask").css({"background-image":"url(https://s.waimai.baidu.com/static/webapp/yindao.png)","background-repeat":"no-repeat","background-size":"contain"})),$("#invokeMask").removeClass("hide").addClass("show")},webappJumpTo:function(e,o){var i=this;l?(0==$("#invokeMask").length&&($("body").append('<div id="invokeMask"></div>'),$("#invokeMask").css({"background-image":"url(https://s.waimai.baidu.com/static/webapp/yindao.png)","background-repeat":"no-repeat","background-size":"contain"})),$("#invokeMask").removeClass("hide").addClass("show")):"shopmenu"===e?(location.href="bdwm://native?pageName=shopMenu&shopId="+o.shopId,i.webappJumpToAppStore()):"shopdetail"==e?(location.href="bdwm://native?pageName=shopMenu&shopId="+o.shopId,i.webappJumpToAppStore()):"shoplist"==e?(location.href="bdwm://native?pageName=shopList&taste="+o.taste+"&promotion="+o.promotion+"&title="+o.title,i.webappJumpToAppStore()):"supermarket"==e?location.href="bdwm://native?pageName=superMarket&shopId="+o.shopId:"home"===e&&(location.href="bdwm://native?pageName=home",i.webappJumpToAppStore())},webappJumpToAppStore:function(){setTimeout(function(){location.href="http://a.app.qq.com/o/simple.jsp?pkgname=com.baidu.lbs.waimai"},5e3)},invokePlatformAPI:function(e,o,i,a){!o&&"shopmenu"===e||-1===$.inArray(this.platform,this.platforms)||this["invoke"+this.platform+"API"](e,o,i,a)},invokenewappAPI:function(e,o,i){if("book"===e)location.href=o;else if("shoplist"===e)WMApp.page.changePage({pageName:"shopList",pageParams:{taste:"",promotion:"",title:""}});else if("shopmenu"===e){var a=o&&o.split(",")||[],t=a[0],n=a[1]||"",s=a[2]||"",p=a[3]||"",r=i||a[4]||"";WMApp.page.changePage(1==r?{pageName:"superMarket",pageParams:{shopId:t,categoryId:p,dishId:n,dishActivityId:s}}:{pageName:"shopMenu",pageParams:{shopId:t}})}},invokewebappAPI:function(){location.href="http://a.app.qq.com/o/simple.jsp?pkgname=com.baidu.lbs.waimai"},openIos:function(e,o){if(e){var i=document.createElement("iframe");i.style.display="none";var a,t=document.body,n=function(e,a){"function"==typeof o&&o(a),window.removeEventListener("pagehide",s,!0),window.removeEventListener("pageshow",s,!0),i&&(i.onload=null,t.removeChild(i),i=null)},s=function(e){clearTimeout(a),n(e,!1)};window.addEventListener("pagehide",s,!0),window.addEventListener("pageshow",s,!0),i.onload=n,i.src=e,t.appendChild(i);var p=+new Date;a=setTimeout(function(){a=setTimeout(function(){var e=+new Date;p-e>1300?n(null,!1):n(null,!0)},1200)},60)}},invokewmappAPI:function(e,o,i){if(("book"===e||"shoplist"===e)&&r.openInUrl("jumpToShopList",{taste:"",promotion:"",sortby:""},""),"shopmenu"===e){var a=o&&o.split(",")||[],n=a[0],s=a[1]||"",p=a[2]||"",m=a[3]||"",l=i||a[4]||"",d=window.appversion.split("."),h=!1;d.length&&(h=d[0]>3||3==d[0]&&d[1]>2||3==d[0]&&2==d[1]&&d[2]>=1),1==l?h?r.openInUrl("jumpToNewShopMenu",{shop_id:n,dish_id:s,dish_activity_id:p,category_id:m},""):t.open("该版本不支持超市商户，请殿下升级新版本哦～"):r.openInUrl("jumpToShopMenu",{release_id:n,shop_id:n,dish_id:s,dish_activity_id:p,category_id:m},"")}},invokebainuoAPI:function(e,o,i,a){if(("book"===e||"shoplist"===e)&&BNJS.page.start("bainuo://component?compid=waimai&comppage=shoplist"),"shopmenu"===e){var t=o&&o.split(",")||[],n=t[0]||"";BNJS.page.start("bainuo://component?compid=waimai&comppage=shopinfo",{shop_id:n,shop_name:a})}},invokeboxAPI:function(e,o){this.invokewiseAPI(e,o)},invokewiseAPI:function(e,o){var i=o.split(",")[0],a={shoplist:{website_url:"https://waimai.baidu.com/mobile/waimai?qt=shoplist&vmgdb="+n,params:"https://waimai.baidu.com/mobile/waimai/vmgdb="+n,o2o:"https://waimai.baidu.com?vmgdb="+n},shopmenu:{website_url:"https://waimai.baidu.com/mobile/waimai?qt=shopmenu&shop_id="+i+"&vmgdb="+n,params:"https://waimai.baidu.com/mobile/waimai?qt=shopmenu&shop_id="+i+"&vmgdb="+n,o2o:"https://waimai.baidu.com/mobile/waimai?qt=shopmenu&shop_id="+i+"&vmgdb="+n},book:{website_url:"https://waimai.baidu.com/mobile/waimai?qt=shoplist&vmgdb="+n,params:"https://waimai.baidu.com/mobile/waimai/vmgdb="+n,o2o:"https://waimai.baidu.com?vmgdb="+n}},t=a[e];if("undefined"!=typeof Box&&Box.isBox){if("android"===Box.os.name)if(Box.version_compare(Box.version,"6.6")>=0){var s={website_url:t.website_url,params:t.params,app_id:"2533830",package_name:"com.baidu.searchbox.takeout",method_name:"url_invoke",from:"web:life",log_url:"null",use_new_window:"0",log_header:"null"};Box.android.invokeApp("Bdbox_android_plugin","invokePlugin",JSON.stringify(s))}else Box.o2o(t.o2o);else if("ios"===Box.os.name)if(Box.version_compare(Box.version,"6.7.0.1")>=0){var p=t.website_url,s={url:p,plugin_id:"box.plugin.waimai"};Box.ios.invokeApp("invokePlug",{action:"open",params:encodeURIComponent(JSON.stringify(s)),minver:"6.1.0.0"},"")}else Box.o2o(t.o2o)}else location.href=t.website_url},invokemapAPI:function(e,o){var i="baidumap://map/component?comName=takeout&target=loadfromWebView&param=";if("book"===e||"shoplist"===e){var a={entering_from:"web_view",page:"shoplist"};window.location.href=i+JSON.stringify(a)}if("shopmenu"===e){var t=o.split(",")[0],a={entering_from:"web_view",page:"shopmenu",qid:"da_qid",shop_id:t};window.location.href=i+JSON.stringify(a)}},onEvents:function(){var e=this;$("body").delegate(this.selector.shoplist,"click",function(o){o.preventDefault(),e.invokePlatformAPI("shoplist",$(this).attr("invoke-shoplist"))}).delegate(this.selector.book,"click",function(o){o.preventDefault(),e.invokePlatformAPI("book",$(this).attr("invoke-book"))}).delegate(this.selector.shopmenu,"click",function(o){o.preventDefault(),e.invokePlatformAPI("shopmenu",$(this).attr("invoke-shopmenu"),$(this).attr("data-store"),$(this).data("shopname"))}).delegate("#invokeMask","click",function(){$(this).removeClass("show").addClass("hide")})},getUniversalLink:function(e,o){var i;return i=-1!=e.indexOf("client.waimai.baidu.com")?e:e.replace("waimai.baidu.com","client.waimai.baidu.com"),i=-1!=i.indexOf("?")?i+"&universal="+o:i+"?universal="+o},clearTimer:function(){clearTimeout(this.timer)},init:function(){d.timer=setTimeout(function(){d.clearTimer(),d.setShare(),d.onEvents()},d.time)},isAndroid:function(){var e=navigator.userAgent;return/android/i.test(e)}};"nuomi"===p&&(d.platform="bainuo"),r.openInUrl("getAppVersion","",function(e){window.appversion=e.result,d.platform="wmapp"}),document.addEventListener("WMAppReady",function(){d.platform="newapp"}),"0010"===s?d.platform="wise":"0020"===s&&(d.platform="box"),window.Box&&window.Box.isBox&&(d.platform="box"),"map"===p&&(d.platform="map"),i.exports={webappJumpTo:function(e,o){d.onEvents(),d.webappJumpTo(e,o)},init:function(e,o){$.extend(d.token,e),$.extend(d.shareInfo,o),d.init()},getUniversalLink:function(e,o){return d.getUniversalLink(e,o)},showMask:function(){d.showMask()},setEvents:function(){d.onEvents()}}});